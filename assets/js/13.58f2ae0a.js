(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{278:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("记录AWS学习过程中的一个练手项目： 个人VPN的搭建， 用来看国外一些新的技术文章和登录一些Google Auth的网站。")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",[t._v("有很多可以搭建的服务器，不局限于AWS。\nAWS除了租用EC2服务器的费用，还要考虑网络流量费用，美国的服务器是0.09刀1G.如果流量大的话可以考虑AWS的LightSail， $3.5美刀每月，包1T流量。")])]),t._v(" "),a("h3",{attrs:{id:"前提"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前提","aria-hidden":"true"}},[t._v("#")]),t._v(" 前提")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("注册一个AWS云服务账号")]),t._v(" "),a("p",[t._v("你需要一台国内可连接的，在国外的服务器。 AWS注册的关键地方是要绑定信用卡，在使用服务的过程中有可能会对云服务不了解产生一些账单，需要自己考虑后决定。")])])]),t._v(" "),a("blockquote",[a("p",[t._v("AWS新注册的账号，会提供一个t2.micro服务器免费一年的套餐（注意：免费套餐里的流量也是有限制的）。如果不是免费套餐，这个搭建会产生费用")])]),t._v(" "),a("h3",{attrs:{id:"方法一：利用aws-cloudformation搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法一：利用aws-cloudformation搭建","aria-hidden":"true"}},[t._v("#")]),t._v(" 方法一：利用AWS CloudFormation搭建")]),t._v(" "),a("p",[t._v("适合于不熟悉服务器配置的同学")]),t._v(" "),a("ul",[a("li",[t._v("第一步：登陆AWS Console，选择合适的Region")]),t._v(" "),a("li",[t._v("第二步：搜索CloudFormation服务，并打开\n"),a("ul",[a("li",[t._v("在CloudFormation页面点击 Create Stack")]),t._v(" "),a("li",[t._v("默认设置界面，Amazon S3 URL 的位置输入https://s3.amazonaws.com/webdigi/VPN/Unified-Cloud-Formation.yaml")]),t._v(" "),a("li",[t._v("点击下一步，在参数Parameter界面输入以后你的VPN登陆需要用的 用户名，密码，解码码")]),t._v(" "),a("li",[t._v("后面一路下一步，至完成，等环境部署好后，你会获得一个服务器的公网ip地址")])])]),t._v(" "),a("li",[t._v("第三步：手机或电脑链接vpn\n"),a("ul",[a("li",[t._v("根据前面的配置，你会获得，VPN服务器ip地址，你自己设置的用户名，密码，加密码")])])])]),t._v(" "),a("p",[t._v("完成！在手机VPN设置里输入对应信息，支持PPTP / L2TP 连接")]),t._v(" "),a("p",[t._v("详细的过程，请参考原文：\n"),a("a",{attrs:{href:"https://www.webdigi.co.uk/blog/2015/how-to-setup-your-own-private-secure-free-vpn-on-the-amazon-aws-cloud-in-10-minutes",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文地址"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/Xuminhua/setup-ipsec-vpn/blob/master/README-zh.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github 开源地址"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"方法二：直接在服务器上搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方法二：直接在服务器上搭建","aria-hidden":"true"}},[t._v("#")]),t._v(" 方法二：直接在服务器上搭建")]),t._v(" "),a("p",[t._v("以下代码可以部署在ubuntu服务器上，个人感觉比上面的CloudFormation更灵活一些。需要多做一步的是配置security group开一些此服务需要的端口，如UDP 500 和UDP 4500等。上面的模板都帮你配置好了")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://git.io/vpnsetup -O vpnsetup.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VPN_IPSEC_PSK")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'secretkey'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VPN_USER")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'username'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VPN_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'password'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" vpnsetup.sh\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"客户端，手机，平板，电脑-使用vpn服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端，手机，平板，电脑-使用vpn服务","aria-hidden":"true"}},[t._v("#")]),t._v(" 客户端，手机，平板，电脑 使用VPN服务")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/hwdsl2/setup-ipsec-vpn/blob/master/docs/clients-zh.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置 IPsec/L2TP VPN 客户端"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("需要注意windows连接前要解决兼容问题, 以管理员身份运行power shell后运行以下代码以后才能连上")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Services\\PolicyAgent /v AssumeUDPEncapsulationContextOnSendRule /t REG_DWORD /d 0x2 /f\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])},[],!1,null,null,null);s.default=n.exports}}]);