(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{293:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[s._v("注意点")]),s._v(" "),t("ol",[t("li",[s._v("本例用的是Join,如果是Left Join和Right Join需要根据具体情况再判断")]),s._v(" "),t("li",[s._v("有些数据库不支持With as的用法")])])]),s._v(" "),t("h2",{attrs:{id:"修改前"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改前","aria-hidden":"true"}},[s._v("#")]),s._v(" 修改前")]),s._v(" "),t("p",[s._v("在使用SQL的时候，我们经常会用到这样的语句：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Select")]),s._v("\ntableA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("tableA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("tableA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field3\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("tableB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("tableB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("tableB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field3\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("From")]),s._v(" \ntableA \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),s._v(" tableB "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" tableA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("foreign_key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" tableB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("keyB\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Where")]),s._v("\n    tableA"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value1'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("And")]),s._v(" tableB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value2'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("在数据量小的时候,这样写没有问题, 当数据量大到出现timeout报错的时候可以尝试这样修改")]),s._v(" "),t("h2",{attrs:{id:"修改后"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改后","aria-hidden":"true"}},[s._v("#")]),s._v(" 修改后")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("With")]),s._v(" a "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Select")]),s._v("\nfield1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("field2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("field3\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("foreign_key   \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("From")]),s._v(" \ntableA \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Where")]),s._v("\n    field1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value1'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Select")]),s._v("\n field1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("field2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("field3\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("keyB\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("From")]),s._v(" \ntableB\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v("\n    field2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'value2'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Select")]),s._v("\na"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field3\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field2\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("field3\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("From")]),s._v("\na\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Join")]),s._v(" b "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("foreign_key "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("keyB\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("p",[s._v("和上面的区别是在做 "),t("code",[s._v("Join")]),s._v(" 之前先做了筛选， 因为做Join的时候资源消耗比较多， 直观的理解，将数据表筛选变小后再做 "),t("code",[s._v("Join")]),s._v(" 效率会高很多。 本例只是提供一个思路，真实情况往往会复杂很多， 需要考虑全面。")])])},[],!1,null,null,null);a.default=e.exports}}]);